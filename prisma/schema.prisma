generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["driverAdapters"]
}

datasource db {
  provider = "postgresql"
}

model Postcard {
  id             Int              @id @default(autoincrement())
  from           String
  to             String
  message        String           @db.Text
  stampText      String
  createdAt      DateTime         @default(now())
  PostcardReport PostcardReport[]
}

enum DeviceType {
  PHONE
  TABLET
  PC
  OTHER
}

enum Page {
  HOME
  BROWSE_POSTCARDS
  SINGLE_POSTCARD
  CREATE_POSTCARD
  ABOUT_US
  CONTACT_US
  TERMS_AND_CONDITIONS
}

enum BugStatus {
  OPEN
  RESOLVED
}

model BugReport {
  id           Int        @id @default(autoincrement())
  whatHappened String
  device       DeviceType
  browser      String
  page         Page
  details      String?
  status       BugStatus  @default(OPEN)
  createdAt    DateTime   @default(now())
}

enum ReportReason {
  INAPPROPRIATE_LANGUAGE
  HATE_SPEECH
  SPAM
  HARASSMENT
  COPYRIGHT_VIOLATION
  OTHER
}

model PostcardReport {
  id         Int          @id @default(autoincrement())
  postcard   Postcard     @relation(fields: [postcardId], references: [id])
  postcardId Int
  reason     ReportReason
  details    String?
  status     BugStatus    @default(OPEN)
  createdAt  DateTime     @default(now())
}
